{% extends "ET_Cust/base_cust.html" %}

{% load i18n %}
{% load static %}
{% load crispy_forms_tags %}

{% block head_title %}Login{% endblock %}

{% block  title %} dsafdasfadfa{% endblock %}
{% block body %}
    <div class="container-fluid">
        <div class="row" >
            <div class="col-lg-3">
                <div class="row">
                    <div class="col-lg-12;show-more-content"
                         style="height: 200px; width: 1000px; text-overflow:ellipsis; overflow: hidden; "
                         style="border-width: 2px; border-style: solid;border-color: #ffbc34;height: 200px;border-radius: 5%">
                        <a style="font-size: 300%; color: #ffb725">{{ restaurant.name }}</a>
                        <p>{{ restaurant.address }}</p>
                        <a style="font-size: 100%; color: #ffb725">{{ restaurant.introduction }}</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-12">
                <div class="row">
                    <div class="col-lg-8">

                        <div class="col-lg-4">
                            <a class="btn btn-primary"
                               style="width:200px; background-color: #ffa312;border-width: 1px; color: #fafeff; border-color:white"
                               href="{% url 'cust_create_group' restaurant.id %}">Menu</a>
                            </br>
                            <a class="btn btn-primary"
                               style="width:200px; background-color: #ffa312;border-width: 1px; color:  #fafeff; border-color:white"
                               href="{% url 'cust_create_group' restaurant.id %}">Create Group</a>
                        </div>

                        <div class="col-lg-4"><a href="#">Group Exist</a></div>
                        </br>
                        {% if group_list %}
                            {% for group in group_list %}
                                <div class="row">
                                    <div class="col-lg-4">
                                        <h3>{{ group.destination }}</h3>
                                    </div>
                                    <div class="col-lg-4">

                                        <div id="{{ group.id }}">{{ group.personalorder_set.count }}</div>
                                        people

                                    </div>
                                    <div class="col-lg-4">
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <p>14 mins remain</p>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <a href="{% url 'cust_restaurant_menu' restaurant.id group.id %}">Join
                                                    Now!</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        {% else %}
                            There is no active group, please create one.
                        {% endif %}
                    </div>
                    <div class="col-lg-4">
                        <div class="row" >
                            <a style="color: #ffb725; font-size: 200%">Delivery Info. of Restaurant:</a>
                            <div class="col-lg-12">
                                <h6>Announcement</h6>
                                <p>{{ restaurant.restaurantserviceinfo.announcement }}</p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-12">
                                <p>Min Delivery: {{ restaurant.restaurantserviceinfo.min_delivery }}</p>
                                <p>Delivery Fee: {{ restaurant.restaurantserviceinfo.delivery_fee }}</p>
                                <!-- <h6>Activities and Discounts</h6>
                                 <p>xxxxxxxxxxxxxxxxxxxxxx</p> -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
{% endblock %}

{% block scripts %}
    {{ block.super }}
    <script>
        $(document).ready(function () {
            count_people();
        });

        function count_people() {
            {% for group in group_list %}
            var url;
            url = "{% url 'count_people' group.id %}";
            $.get(url, function (data) {
                $('#{{ group.id }}').html(data);
            });
            {% endfor %}
        setTimeout(count_people, 5000)
        }

    </script>
{% endblock %}